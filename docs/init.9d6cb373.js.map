{"version":3,"sources":["ui.js","constants.js","gameState.js","buttons.js","init.js"],"names":["modFox","state","document","querySelector","className","modScene","togglePoopBag","show","classList","toggle","writeModal","text","innerHTML","scoreRefresh","score","textContent","TICK_RATE","ICONS","RAIN_CHANCE","SCENES","DAY_LENGTH","NIGHT_LENGTH","getNextHungerTime","clock","Math","floor","random","getNextDieTime","getNextPoopTime","gameState","current","wakeTime","sleepTime","hungryTime","dieTime","timeToStartCelebrating","timeToEndCelebrating","poopTime","tick","console","log","wake","sleep","getHungry","die","startCelebrating","endCelebrating","poop","startGame","scene","determineState","clearTimes","handleUserAction","icon","includes","changeWeather","cleanUpPoop","feed","length","bind","toggleHighlighted","initButtons","selectedIcon","buttonClick","target","contains","addEventListener","init","nextTimeToTick","Date","now","nextAnimationFrame","game","requestAnimationFrame"],"mappings":";;AIAA;;AACA;;AHDO,AGEP,IHFagB,SAAS,GAAG,IAAlB;AEAP,ADAA,AFAO,IAAMhB,MAAM,GAAG,SAASA,MAAT,CAAgBC,KAAhB,EAAuB;ACCtC,ADAHC,EAAAA,ECASe,KAAK,CDAN,CAACd,CCAQ,CAAC,MAAD,EAAS,GDA1B,CAAuB,ECAN,EAAiB,EDAlC,EAA+BC,KCAd,CAAd,GDAH,qBAAsDH,KAAtD;AGCJ,ADKA,AFLC,CAFM,GGED2D,iBAAiB,GAAG,SAApBA,iBAAoB,CAACP,IAAD,EAAO9C,IAAP,EAAgB;AACtCL,AFDG,EECHA,EFDSgB,MECD,CACHf,IFFe,GAAG,GAApB,GECH,YACuBc,iBAAMoC,IAAN,CADvB,YAEK7C,SAFL,CAEeC,MAFf,CAEsB,aAFtB,EAEqCF,IAFrC;AAGH,ADWD,CCfA,EAMA,CDSMsB,SAAS,GAAG;ADdX,ACeHC,EAAAA,EDfSX,KCeF,CDfQ,CCeN,EDfS,CAAC,GCcL,EDdI,EAAQ,MAAR,CAAf;ACgBHI,AFfG,EEeHA,EFfSlB,GEeJ,EAAE,CAFO,EFbG,GAAG,SAASA,QAAT,CAAkBJ,KAAlB,EAAyB;AGMlC,AFNR,ACgBH8B,AEhBJ,AJCI7B,EEeA6B,AFfA7B,ECDSkB,KEMWyC,ACNfM,CFgBG,AFfA,CAAChE,CEeC,CAAC,AEhBf,CHAuB,ACaL,EEbF,CHAU,EAAnB,CEMQ,CAAqBiD,GHLhC,CAAuB,OAAvB,EAAgChD,GGKrB,EAAuC,IHLlD,kBAAoDH,KAApD;AGMA,ADUA+B,AEhBAO,AJCH,CAFM,CEiBHP,AEhBAO,IDMIuB,GCNG,CAACtB,CFgBC,EAAE,AEhBX,CFgBY,AEhBA,CFYE,GCNE,GAAG,CAAnB,OCNA;AHAG,ACiBHP,AEhBA,EFgBAA,EDjBSZ,QCiBC,EAAE,CAAC,CDjBQ,ACYP,GDZU,CAArB,IGCS+B,2BAAZ;ADOA,ADUAlB,AEfA,EFeAA,IEfIkC,GFeG,ECVEL,ADUA,CAAC,CANI,OETI,EDKlB,CCLqBM,IAAI,CAACC,CDKO,ECLZ,EAArB;ADKiC,ADWjCnC,EAAAA,MCXuB6B,MAAU,QAAVA,EDWD,EAAE,CAAC,CCXQ,ADInB;ADVX,ACkBH5B,AEfA,AJFG,EEiBHA,EDlBSd,ADCAhB,OIEAiE,MJFa,GAAG,CCDC,CCkBN,EDlBS,ACkBP,CAAC,CART,GEPd,AJFkCjE,GIEJ,CHHrBgB,SDCgB,CAAuBf,IAAvB,EAA6B,CCDzB,CAACgB,KAAD;AEOzB,AFPyB,ACmB7Bc,AEfI,AJFJnC,EEiBAmC,AFjBAnC,MGKQ8D,ACHEM,CHHV9C,CCkBQ,AFjBA,CIEK,AJFJrB,CEiBC,CDlBN,ACkBO,CCZG,AFNTsB,ACSS,AENE4C,CDGD7D,GCHK,CHHpB,AGGqB8D,CHHV9C,EGGK,EDGR,AFNO,AGGX,AJFJ,CGKyByC,AFNTvC,ADCO,MCDZ,EEMH,CAA0B,EFNP,ADC3B,CCDA,CDCoClB,GCDJ,CAAhC,EEMQ,CAAJ,AFNgCe,EEMW,AHL/C,CAA8Cd,ECFjB,IDE7B,CAAqD,QAArD,EAA+D,CAACF,IAAhE;AGMQqD,AFRqB,ACoB7B9C,AFjBH,CCHM,ADCA,CEmBHA,ICZQ8C,CDYH,EAAE,CAVO,aCFW,CAACE,YAAD,EAAe,KAAf,CAAjB;AACAA,ADYRxB,AEfI,EFeJA,ICZQwB,ADCM,EEJNM,UDGY,GAAG,CAAC,ACHF,EFef,ECZqBN,ACHFQ,GAAtB,EAA2B,ODGR,IAAqBrD,iBAAMyC,MAA1C;AACAE,ADYJ,AEfIY,MDGAZ,GDYCrC,KAAL,SCZqB,CAACuC,CCHbxB,IAAL,ODGiB,EAAe,IAAf,CAAjB;AACH,ADYDC,IAAAA,CChBA,MAIO,ADYA,CAACC,GCZGwB,ADYX,CAAY,KCZK,CAACxD,CDYlB,EAAqB,KAAKe,CCZf,CAAiB0C,GDY5B,KCZW,CAA0B,WAA1B,CAAJ,EAA4C;AAC/CL,AFTL,AGKKQ,AJHL,ICFMzC,ADEAjB,EGODkD,ACJAQ,QJHW,GAAG,CCFC,EGKD,CHLI,EESD,ACJAE,CDICR,ECJE,AJHGpD,GIGAM,CHLtBW,MESgB,AHPH,EGOkB,CHPa,IGO5B,CAAjB,AFTkB,CAACJ,IGKnB,CHLkB;AEUlBuC,AFVkB,ACsBtB,AEhBC,AJJgD,MGQ7CA,AHRkCnD,EEoBlC,CDrBRa,CDCqD,GCDjD,ACqBSD,CDrBRE,IESe,ADYZ,CDrBR,CAAWD,CESY,CAAC,CDYD,CDrBR,CAACE,CESYoC,EDYA/B,GDrBjB,KAAgB,ACqBvB,CDrBJ,CESuB,ADYe,GDrBN,CESYd,AFT5C,GAAoCM,KADV,SEUwBmC,MAA1C,gBHRyC,EAAI;AGS7CE,AFXkB,ACuBlB,AFpBR1D,CCHG,CDGHA,IGQQ0D,IHRA,CEoBKnB,AFpBJtC,IEoBD,QCZiB,CAAC2D,AHR1B,CACI,QADJ,EAEElD,CGMuB,EAAe,IAAf,CAAjB,CHRR,wCAE0CD,IAF1C;AGSK,ADYA,AEjBD8D,AJDP,CAJM,GIKCA,CDCO,ADcP,MCVO,ADYA,IAAI,KAAKzC,KEjBK,CAACuC,GFiBX,KAAmB,KAAKhD,KAA5B,AEjBc,CAArB,CFiB0C;ACXtC6B,ADYA,AEjBP,MDKOA,KDYKV,KAAL,MCZgB,CAACzB,iBAAM6C,YAAN,CAAD,CAAhB;AACH,ADYA,KAFM,MAEA,IAAI,KAAKvC,KAAL,IAAc,KAAKU,UAAvB,EAAmC;ACX7C,AFZE,ACwBK,AElBRwC,EAAAA,EHNS7C,OCwBIe,QDxBW,CCwBhB,EDxBmB,CGMN,CAAC4B,OHNb3C,WGMY,CAArB,GHN2B,CAACL,KAAD;AAAA,ACyBtB,AElBR,AJFM,IAAMV,CEkBE,IDtBXW,ECwBW,EDxBP,CAACC,CCwBU,CFpBM,GCJrB,ADIwB,CCJbD,ACwBSD,IDxBL,CAACG,ACwBD,GFpBkBb,CEoBJ,EDxBlB,GCwBuBqB,EDxBP,CAA3B,GDIwB,CCJQ,ACwBrB,AFpBmCpB,CCJ9C,CCwB2C,EDxBPS,CDIZ,EAA6B,ECL1B;AEa3BrB,AFb2B,AC0BnB,AFpBRA,CCNG,CEaHA,AHPAA,QGOQ,AHPA,CGOCC,ADaIyC,AFpBJzC,GEoBD,UCbR,AHPA,CGOuB,AHPA,UGOvB,EAAmC+D,IHPnC,EAAyCnD,UGOzC,CAAoD,AHPpD,GAAuDD,IGOvD,CHPA,CGO6DiD,WAA7D;AACH,ADaQ,AElBTI,AJFC,CAFM,GIIH,CFgBW,MAEA,IAAI,KAAK5C,KAAL,IAAc,KAAKY,sBAAvB,EAA+C;AAClD,WAAKU,gBAAL;AACH,KAFM,MAEA,IAAI,KA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","file":"init.9d6cb373.js","sourceRoot":"..\\src","sourcesContent":["export const modFox = function modFox(state) {\r\n    document.querySelector(\".fox\").className = `fox fox-${state}`;\r\n};\r\n\r\nexport const modScene = function modScene(state) {\r\n    document.querySelector(\".game\").className = `game ${state}`;\r\n};\r\n\r\nexport const togglePoopBag = function togglePoopBag(show) {\r\n    document.querySelector(\".poop-bag\").classList.toggle(\"hidden\", !show);\r\n};\r\n\r\nexport const writeModal = function writeModal(text = \"\") {\r\n    document.querySelector(\r\n        \".modal\"\r\n    ).innerHTML = `<div class=\"modal-inner\">${text}</div>`;\r\n};\r\n\r\nexport const scoreRefresh = function scoreRefresh(score) {\r\n    document.querySelector(\"#current-score\").textContent = score;\r\n};\r\n","export const TICK_RATE = 3000;\r\nexport const ICONS = [\"fish\", \"poop\", \"weather\"];\r\nexport const RAIN_CHANCE = 0.2;\r\nexport const SCENES = [\"day\", \"rain\"];\r\nexport const DAY_LENGTH = 60;\r\nexport const NIGHT_LENGTH = 4;\r\n\r\nexport const getNextHungerTime = (clock) =>\r\n    Math.floor(Math.random() * 3) + 5 + clock;\r\n\r\nexport const getNextDieTime = (clock) =>\r\n    Math.floor(Math.random() * 2) + 3 + clock;\r\n\r\nexport const getNextPoopTime = (clock) =>\r\n    Math.floor(Math.random() * 2) + 4 + clock;\r\n","import {\r\n    modFox,\r\n    modScene,\r\n    togglePoopBag,\r\n    writeModal,\r\n    scoreRefresh,\r\n} from \"./ui\";\r\nimport {\r\n    RAIN_CHANCE,\r\n    SCENES,\r\n    DAY_LENGTH,\r\n    NIGHT_LENGTH,\r\n    getNextDieTime,\r\n    getNextHungerTime,\r\n    getNextPoopTime,\r\n} from \"./constants\";\r\n\r\nconst gameState = {\r\n    current: \"INIT\",\r\n    clock: 1,\r\n    wakeTime: -1,\r\n    sleepTime: -1,\r\n    hungryTime: -1,\r\n    dieTime: -1,\r\n    timeToStartCelebrating: -1,\r\n    timeToEndCelebrating: -1,\r\n    poopTime: -1,\r\n    score: 0,\r\n    tick() {\r\n        this.clock++;\r\n        console.log(\"clock\", this.clock);\r\n\r\n        if (this.clock === this.wakeTime) {\r\n            this.wake();\r\n        } else if (this.sleepTime === this.clock) {\r\n            this.sleep();\r\n        } else if (this.clock == this.hungryTime) {\r\n            this.getHungry();\r\n        } else if (this.clock == this.dieTime) {\r\n            this.die();\r\n        } else if (this.clock == this.timeToStartCelebrating) {\r\n            this.startCelebrating();\r\n        } else if (this.clock == this.timeToEndCelebrating) {\r\n            this.endCelebrating();\r\n        } else if (this.clock == this.poopTime) {\r\n            this.poop();\r\n        }\r\n\r\n        return this.clock;\r\n    },\r\n    startGame() {\r\n        console.log(\"hatching\");\r\n        this.current = \"HATCHING\";\r\n        this.wakeTime = this.clock + 3;\r\n        modFox(\"egg\");\r\n        modScene(\"day\");\r\n        writeModal();\r\n        scoreRefresh(this.score);\r\n    },\r\n    wake() {\r\n        console.log(\"awoken\");\r\n        this.current = \"IDLING\";\r\n        this.wakeTime = -1;\r\n        this.scene = Math.random() > RAIN_CHANCE ? 0 : 1;\r\n        modScene(SCENES[this.scene]);\r\n        this.sleepTime = this.clock + DAY_LENGTH;\r\n        this.hungryTime = getNextHungerTime(this.clock);\r\n        this.determineState();\r\n    },\r\n    poop() {\r\n        this.current = \"POOPING\";\r\n        this.poopTime = -1;\r\n        this.dieTime = getNextDieTime(this.clock);\r\n        modFox(\"pooping\");\r\n    },\r\n    sleep() {\r\n        this.current = \"SLEEP\";\r\n        modFox(\"sleep\");\r\n        modScene(\"night\");\r\n        this.clearTimes();\r\n        this.wakeTime = this.clock + NIGHT_LENGTH;\r\n    },\r\n    getHungry() {\r\n        this.current = \"HUNGRY\";\r\n        this.dieTime = getNextDieTime(this.clock);\r\n        this.hungryTime = -1;\r\n        modFox(\"hungry\");\r\n    },\r\n    clearTimes() {\r\n        this.wakeTime = -1;\r\n        this.sleepTime = -1;\r\n        this.hungryTime = -1;\r\n        this.dieTime = -1;\r\n        this.poopTime = -1;\r\n        this.timeToEndCelebrating = -1;\r\n        this.timeToStartCelebrating = -1;\r\n        this.score = 0;\r\n    },\r\n    die() {\r\n        this.current = \"DEAD\";\r\n        modScene(\"dead\");\r\n        modFox(\"dead\");\r\n        this.clearTimes();\r\n        writeModal(\"The fox died :( <br/> Press the middle button to start\");\r\n    },\r\n    startCelebrating() {\r\n        this.current = \"CELEBRATING\";\r\n        modFox(\"celebrate\");\r\n        this.timeToStartCelebrating = -1;\r\n        this.timeToEndCelebrating = this.clock + 2;\r\n        this.determineState();\r\n        this.score += 100;\r\n        scoreRefresh(this.score);\r\n    },\r\n    determineState() {\r\n        if (this.current === \"IDLING\") {\r\n            if (SCENES[this.scene] == \"rain\") {\r\n                modFox(\"rain\");\r\n            } else {\r\n                modFox(\"idling\");\r\n            }\r\n        }\r\n    },\r\n    endCelebrating() {\r\n        this.timeToEndCelebrating = -1;\r\n        this.current = \"IDLING\";\r\n        modFox(\"idling\");\r\n        togglePoopBag(false);\r\n    },\r\n    handleUserAction(icon) {\r\n        if (\r\n            [\"HATCHING\", \"CELEBRATING\", \"FEEDING\", \"SLEEP\"].includes(\r\n                this.current\r\n            )\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        if (this.current === \"INIT\" || this.current === \"DEAD\") {\r\n            this.startGame();\r\n            return;\r\n        }\r\n\r\n        switch (icon) {\r\n            case \"weather\":\r\n                this.changeWeather();\r\n                break;\r\n            case \"poop\":\r\n                this.cleanUpPoop();\r\n                break;\r\n            case \"fish\":\r\n                this.feed();\r\n                break;\r\n        }\r\n    },\r\n    changeWeather() {\r\n        this.scene = (this.scene + 1) % SCENES.length;\r\n        modScene(SCENES[this.scene]);\r\n        this.determineState();\r\n    },\r\n    cleanUpPoop() {\r\n        if (!(this.current == \"POOPING\")) {\r\n            return;\r\n        }\r\n        this.dieTime = -1;\r\n        togglePoopBag(true);\r\n        this.startCelebrating();\r\n        this.hungryTime = getNextHungerTime(this.clock);\r\n    },\r\n    feed() {\r\n        if (this.current != \"HUNGRY\") {\r\n            return;\r\n        }\r\n\r\n        this.current = \"FEEDING\";\r\n        this.dieTime = -1;\r\n        this.poopTime = getNextPoopTime(this.clock);\r\n        modFox(\"eating\");\r\n        this.timeToStartCelebrating = this.clock + 2;\r\n    },\r\n};\r\n\r\nexport const handleUserAction = gameState.handleUserAction.bind(gameState);\r\nexport default gameState;\r\n","import { ICONS } from \"./constants\";\r\n\r\nconst toggleHighlighted = (icon, show) => {\r\n    document\r\n        .querySelector(`.${ICONS[icon]}-icon`)\r\n        .classList.toggle(\"highlighted\", show);\r\n};\r\n\r\n// toogleHighlighted('poop', false)\r\n\r\nexport default function initButtons(handleUserAction) {\r\n    let selectedIcon = 0;\r\n\r\n    function buttonClick({ target }) {\r\n        if (target.classList.contains(\"left-btn\")) {\r\n            toggleHighlighted(selectedIcon, false);\r\n            selectedIcon = (2 + selectedIcon) % ICONS.length;\r\n            toggleHighlighted(selectedIcon, true);\r\n        } else if (target.classList.contains(\"right-btn\")) {\r\n            toggleHighlighted(selectedIcon, false);\r\n            selectedIcon = (1 + selectedIcon) % ICONS.length;\r\n            toggleHighlighted(selectedIcon, true);\r\n        } else {\r\n            handleUserAction(ICONS[selectedIcon]);\r\n        }\r\n    }\r\n    document.querySelector(\".buttons\").addEventListener(\"click\", buttonClick);\r\n}\r\n","import game, { handleUserAction } from \"./gameState\";\r\nimport { TICK_RATE } from \"./constants\";\r\nimport initButtons from \"./buttons\";\r\n\r\nfunction init() {\r\n    console.log(\"starting game\");\r\n    initButtons(handleUserAction);\r\n\r\n    let nextTimeToTick = Date.now();\r\n\r\n    function nextAnimationFrame() {\r\n        const now = Date.now();\r\n\r\n        if (nextTimeToTick <= now) {\r\n            game.tick();\r\n            nextTimeToTick = now + TICK_RATE;\r\n        }\r\n        requestAnimationFrame(nextAnimationFrame);\r\n    }\r\n    requestAnimationFrame(nextAnimationFrame);\r\n}\r\n\r\ninit();\r\n"]}